var counts =  {'1625': 8, '2156': 2, '3467': 181, '00017138': 20, '1408': 72, '00021806': 5, '3765': 38, '00015143': 28, '3479': 11, '4085': 3, '3483': 4, '1904': 1, '4240': 1, '00010583': 1, '2832': 3, '00023820': 3, '00016901': 2, '00017969': 3, '00016355': 3, '00022791': 1, '901': 3, '00016768': 2, '00010056': 4, '3601': 1, '1471': 1, '4073': 1, '3463': 1, '2699': 2, '00016201': 3, '1861': 1, '00020986': 6, '1875': 2, '694': 2, '00011037': 2, '2590': 7, '00013191': 4, '00014395': 1, '00024367': 2, '1645': 2, '00021323': 1, '4204': 1, '4209': 4, '00010351': 1, '00010413': 1, '1639': 1, '3549': 1, '1638': 1, '00036743': 1, '00016113': 1, '0011046': 1, '3331': 2, '00015680': 1, '3442': 1, '00016568': 1, '00016569': 1, '00015181': 1, '00015179': 1, '00015557': 1, '43': 1, '00021391': 1, '00016518': 1, '00010673': 2, '00016540': 1, '00018017': 1, '00018018': 1, '00017097': 1, '2325': 1, '138': 1, '00011615': 1, '00010187': 1, '2381': 1, '00017050': 1, '4453': 1, '00015896': 1, '00016832': 1, '2640': 1, '00023301': 1, '00016834': 1, '4603': 1, '00016835': 1, '00016836': 1, '00014566': 1, '00012294': 1, '3445': 1, '3281': 1, '819': 1, '2734': 1, '3042': 1, '3523': 1, '4751': 1, '00029275': 3, '00029274': 2, '2334': 1, '00010061': 1, '00010062': 1, '1180': 1, '00010035': 1, '4086': 1, '00010352': 1, '4016': 1, '1112': 1, '00023096': 1, '3230': 1, '2678': 1, '3551': 1, '00016556': 1, '2839': 2, '00015156': 1, '00025457': 1, '00014883': 1, '00013839': 1, '00012182': 1, '3466': 1, '3458': 1, '2169': 1, '00028245': 1, '00016952': 1, '1409': 1, '1677': 1, '2141': 1};
var overlapsList =  [{'pair': ['1625', '2156'], 'count': 1}, {'pair': ['1625', '3467'], 'count': 8}, {'pair': ['00017138', '1625'], 'count': 2}, {'pair': ['1408', '1625'], 'count': 4}, {'pair': ['00021806', '1625'], 'count': 2}, {'pair': ['1625', '3765'], 'count': 4}, {'pair': ['2156', '3467'], 'count': 2}, {'pair': ['00017138', '2156'], 'count': 1}, {'pair': ['1408', '2156'], 'count': 1}, {'pair': ['00021806', '2156'], 'count': 1}, {'pair': ['2156', '3765'], 'count': 1}, {'pair': ['00017138', '3467'], 'count': 20}, {'pair': ['1408', '3467'], 'count': 72}, {'pair': ['00021806', '3467'], 'count': 5}, {'pair': ['3467', '3765'], 'count': 38}, {'pair': ['00017138', '1408'], 'count': 19}, {'pair': ['00017138', '00021806'], 'count': 2}, {'pair': ['00017138', '3765'], 'count': 6}, {'pair': ['00021806', '1408'], 'count': 4}, {'pair': ['1408', '3765'], 'count': 35}, {'pair': ['00021806', '3765'], 'count': 4}, {'pair': ['00015143', '3467'], 'count': 28}, {'pair': ['3467', '3479'], 'count': 11}, {'pair': ['00015143', '3479'], 'count': 5}, {'pair': ['3467', '4085'], 'count': 3}, {'pair': ['3765', '4085'], 'count': 2}, {'pair': ['3467', '3483'], 'count': 4}, {'pair': ['3479', '3483'], 'count': 4}, {'pair': ['1904', '3467'], 'count': 1}, {'pair': ['1904', '4085'], 'count': 1}, {'pair': ['00021806', '1904'], 'count': 1}, {'pair': ['1904', '3765'], 'count': 1}, {'pair': ['00021806', '4085'], 'count': 1}, {'pair': ['3467', '4240'], 'count': 1}, {'pair': ['00015143', '4240'], 'count': 1}, {'pair': ['00010583', '1625'], 'count': 1}, {'pair': ['1625', '2832'], 'count': 1}, {'pair': ['00010583', '3467'], 'count': 1}, {'pair': ['2832', '3467'], 'count': 3}, {'pair': ['00010583', '2832'], 'count': 1}, {'pair': ['00023820', '3467'], 'count': 3}, {'pair': ['00016901', '3467'], 'count': 2}, {'pair': ['00017969', '3467'], 'count': 3}, {'pair': ['00016355', '3467'], 'count': 3}, {'pair': ['00016901', '00023820'], 'count': 2}, {'pair': ['00017969', '00023820'], 'count': 3}, {'pair': ['00016355', '00023820'], 'count': 3}, {'pair': ['00016901', '00017969'], 'count': 2}, {'pair': ['00016355', '00016901'], 'count': 2}, {'pair': ['00016355', '00017969'], 'count': 3}, {'pair': ['00022791', '3467'], 'count': 1}, {'pair': ['00022791', '00023820'], 'count': 1}, {'pair': ['00017969', '00022791'], 'count': 1}, {'pair': ['00016355', '00022791'], 'count': 1}, {'pair': ['3467', '901'], 'count': 3}, {'pair': ['00016768', '901'], 'count': 2}, {'pair': ['00010056', '901'], 'count': 2}, {'pair': ['00016768', '3467'], 'count': 2}, {'pair': ['00010056', '3467'], 'count': 4}, {'pair': ['00010056', '00016768'], 'count': 2}, {'pair': ['1625', '3601'], 'count': 1}, {'pair': ['1471', '1625'], 'count': 1}, {'pair': ['3467', '3601'], 'count': 1}, {'pair': ['1471', '3467'], 'count': 1}, {'pair': ['1471', '3601'], 'count': 1}, {'pair': ['3467', '4073'], 'count': 1}, {'pair': ['3463', '3467'], 'count': 1}, {'pair': ['3463', '4073'], 'count': 1}, {'pair': ['2699', '3467'], 'count': 2}, {'pair': ['00016201', '3467'], 'count': 3}, {'pair': ['00016201', '2699'], 'count': 3}, {'pair': ['1861', '3467'], 'count': 1}, {'pair': ['1408', '1861'], 'count': 1}, {'pair': ['1861', '3765'], 'count': 1}, {'pair': ['00020986', '3467'], 'count': 6}, {'pair': ['1875', '3467'], 'count': 2}, {'pair': ['1408', '1875'], 'count': 2}, {'pair': ['1875', '3765'], 'count': 2}, {'pair': ['3467', '694'], 'count': 2}, {'pair': ['00011037', '3467'], 'count': 2}, {'pair': ['00011037', '694'], 'count': 2}, {'pair': ['2590', '3467'], 'count': 7}, {'pair': ['00013191', '3467'], 'count': 4}, {'pair': ['00014395', '3467'], 'count': 1}, {'pair': ['00013191', '2590'], 'count': 1}, {'pair': ['00014395', '2590'], 'count': 1}, {'pair': ['2590', '2699'], 'count': 1}, {'pair': ['00016201', '2590'], 'count': 2}, {'pair': ['00013191', '00014395'], 'count': 1}, {'pair': ['00013191', '2699'], 'count': 1}, {'pair': ['00013191', '00016201'], 'count': 2}, {'pair': ['00014395', '2699'], 'count': 1}, {'pair': ['00014395', '00016201'], 'count': 2}, {'pair': ['00024367', '3467'], 'count': 2}, {'pair': ['1645', '3467'], 'count': 2}, {'pair': ['1408', '1645'], 'count': 1}, {'pair': ['1645', '3765'], 'count': 2}, {'pair': ['00021323', '3467'], 'count': 1}, {'pair': ['00015143', '00021323'], 'count': 1}, {'pair': ['00021323', '4204'], 'count': 1}, {'pair': ['00021323', '4209'], 'count': 1}, {'pair': ['3467', '4204'], 'count': 1}, {'pair': ['3467', '4209'], 'count': 4}, {'pair': ['00015143', '4204'], 'count': 1}, {'pair': ['00015143', '4209'], 'count': 1}, {'pair': ['4204', '4209'], 'count': 1}, {'pair': ['00010351', '3467'], 'count': 1}, {'pair': ['00010351', '00010413'], 'count': 1}, {'pair': ['00010351', '00015143'], 'count': 1}, {'pair': ['00010351', '3479'], 'count': 1}, {'pair': ['00010413', '3467'], 'count': 1}, {'pair': ['00010413', '00015143'], 'count': 1}, {'pair': ['00010413', '3479'], 'count': 1}, {'pair': ['1639', '3549'], 'count': 1}, {'pair': ['1638', '1639'], 'count': 1}, {'pair': ['1639', '3467'], 'count': 1}, {'pair': ['1408', '1639'], 'count': 1}, {'pair': ['1639', '3765'], 'count': 1}, {'pair': ['1638', '3549'], 'count': 1}, {'pair': ['3467', '3549'], 'count': 1}, {'pair': ['1408', '3549'], 'count': 1}, {'pair': ['3549', '3765'], 'count': 1}, {'pair': ['1638', '3467'], 'count': 1}, {'pair': ['1408', '1638'], 'count': 1}, {'pair': ['1638', '3765'], 'count': 1}, {'pair': ['00036743', '3467'], 'count': 1}, {'pair': ['00016113', '3467'], 'count': 1}, {'pair': ['00036743', '1408'], 'count': 1}, {'pair': ['00016113', '1408'], 'count': 1}, {'pair': ['00021806', '00036743'], 'count': 1}, {'pair': ['00016113', '00021806'], 'count': 1}, {'pair': ['00016113', '00036743'], 'count': 1}, {'pair': ['00020986', '2590'], 'count': 2}, {'pair': ['0011046', '2590'], 'count': 1}, {'pair': ['2590', '3331'], 'count': 1}, {'pair': ['00015680', '2590'], 'count': 1}, {'pair': ['2590', '3442'], 'count': 1}, {'pair': ['0011046', '3467'], 'count': 1}, {'pair': ['3331', '3467'], 'count': 2}, {'pair': ['00015680', '3467'], 'count': 1}, {'pair': ['3442', '3467'], 'count': 1}, {'pair': ['00020986', '0011046'], 'count': 1}, {'pair': ['00020986', '3331'], 'count': 1}, {'pair': ['00015680', '00020986'], 'count': 1}, {'pair': ['00020986', '3442'], 'count': 1}, {'pair': ['0011046', '3331'], 'count': 1}, {'pair': ['00015680', '0011046'], 'count': 1}, {'pair': ['0011046', '3442'], 'count': 1}, {'pair': ['00015680', '3331'], 'count': 1}, {'pair': ['3331', '3442'], 'count': 1}, {'pair': ['00015680', '3442'], 'count': 1}, {'pair': ['00016568', '3467'], 'count': 1}, {'pair': ['00016569', '3467'], 'count': 1}, {'pair': ['00015181', '3467'], 'count': 1}, {'pair': ['00015179', '3467'], 'count': 1}, {'pair': ['00016568', '00016569'], 'count': 1}, {'pair': ['00015181', '00016568'], 'count': 1}, {'pair': ['00015179', '00016568'], 'count': 1}, {'pair': ['00015181', '00016569'], 'count': 1}, {'pair': ['00015179', '00016569'], 'count': 1}, {'pair': ['00015179', '00015181'], 'count': 1}, {'pair': ['00015143', '901'], 'count': 1}, {'pair': ['2832', '3479'], 'count': 1}, {'pair': ['00015143', '4085'], 'count': 1}, {'pair': ['00015557', '3467'], 'count': 1}, {'pair': ['00015557', '43'], 'count': 1}, {'pair': ['00010056', '00015557'], 'count': 1}, {'pair': ['3467', '43'], 'count': 1}, {'pair': ['00010056', '43'], 'count': 1}, {'pair': ['00016518', '00021391'], 'count': 1}, {'pair': ['00010673', '00021391'], 'count': 1}, {'pair': ['00016540', '00021391'], 'count': 1}, {'pair': ['00021391', '3467'], 'count': 1}, {'pair': ['00015143', '00021391'], 'count': 1}, {'pair': ['00021391', '3479'], 'count': 1}, {'pair': ['00010673', '00016518'], 'count': 1}, {'pair': ['00016518', '00016540'], 'count': 1}, {'pair': ['00016518', '3467'], 'count': 1}, {'pair': ['00015143', '00016518'], 'count': 1}, {'pair': ['00016518', '3479'], 'count': 1}, {'pair': ['00010673', '00016540'], 'count': 1}, {'pair': ['00010673', '3467'], 'count': 2}, {'pair': ['00010673', '00015143'], 'count': 1}, {'pair': ['00010673', '3479'], 'count': 1}, {'pair': ['00016540', '3467'], 'count': 1}, {'pair': ['00015143', '00016540'], 'count': 1}, {'pair': ['00016540', '3479'], 'count': 1}, {'pair': ['00018017', '3467'], 'count': 1}, {'pair': ['00018018', '3467'], 'count': 1}, {'pair': ['00017097', '3467'], 'count': 1}, {'pair': ['2325', '3467'], 'count': 1}, {'pair': ['138', '3467'], 'count': 1}, {'pair': ['00018017', '00018018'], 'count': 1}, {'pair': ['00017097', '00018017'], 'count': 1}, {'pair': ['00018017', '2325'], 'count': 1}, {'pair': ['00018017', '138'], 'count': 1}, {'pair': ['00017097', '00018018'], 'count': 1}, {'pair': ['00018018', '2325'], 'count': 1}, {'pair': ['00018018', '138'], 'count': 1}, {'pair': ['00017097', '2325'], 'count': 1}, {'pair': ['00017097', '138'], 'count': 1}, {'pair': ['138', '2325'], 'count': 1}, {'pair': ['00011615', '3467'], 'count': 1}, {'pair': ['00010187', '3467'], 'count': 1}, {'pair': ['2381', '3467'], 'count': 1}, {'pair': ['00011615', '2590'], 'count': 1}, {'pair': ['00010187', '2590'], 'count': 1}, {'pair': ['2381', '2590'], 'count': 1}, {'pair': ['00011615', '00020986'], 'count': 1}, {'pair': ['00010187', '00020986'], 'count': 1}, {'pair': ['00020986', '2381'], 'count': 1}, {'pair': ['00010187', '00011615'], 'count': 1}, {'pair': ['00011615', '2381'], 'count': 1}, {'pair': ['00010187', '2381'], 'count': 1}, {'pair': ['00021806', '1875'], 'count': 1}, {'pair': ['00017050', '3467'], 'count': 1}, {'pair': ['00017050', '1408'], 'count': 1}, {'pair': ['00017050', '3765'], 'count': 1}, {'pair': ['3467', '4453'], 'count': 1}, {'pair': ['00015896', '3467'], 'count': 1}, {'pair': ['00015143', '00015896'], 'count': 1}, {'pair': ['00015143', '2590'], 'count': 3}, {'pair': ['2590', '3479'], 'count': 1}, {'pair': ['00016832', '3467'], 'count': 1}, {'pair': ['2640', '3467'], 'count': 1}, {'pair': ['00023301', '3467'], 'count': 1}, {'pair': ['00023301', '2640'], 'count': 1}, {'pair': ['00016834', '3467'], 'count': 1}, {'pair': ['00016834', '1408'], 'count': 1}, {'pair': ['1625', '4603'], 'count': 1}, {'pair': ['00016835', '1625'], 'count': 1}, {'pair': ['00016836', '1625'], 'count': 1}, {'pair': ['3467', '4603'], 'count': 1}, {'pair': ['00016835', '3467'], 'count': 1}, {'pair': ['00016836', '3467'], 'count': 1}, {'pair': ['00016835', '4603'], 'count': 1}, {'pair': ['00016836', '4603'], 'count': 1}, {'pair': ['00016835', '00016836'], 'count': 1}, {'pair': ['00014566', '3467'], 'count': 1}, {'pair': ['00014566', '00017138'], 'count': 1}, {'pair': ['00017138', '4209'], 'count': 1}, {'pair': ['00014566', '1408'], 'count': 1}, {'pair': ['1408', '4209'], 'count': 1}, {'pair': ['00014566', '3765'], 'count': 1}, {'pair': ['3765', '4209'], 'count': 1}, {'pair': ['00014566', '4209'], 'count': 1}, {'pair': ['00012294', '3467'], 'count': 1}, {'pair': ['3445', '3467'], 'count': 1}, {'pair': ['00012294', '3445'], 'count': 1}, {'pair': ['00012294', '3331'], 'count': 1}, {'pair': ['3331', '3445'], 'count': 1}, {'pair': ['1625', '3281'], 'count': 1}, {'pair': ['1625', '4209'], 'count': 1}, {'pair': ['3281', '3467'], 'count': 1}, {'pair': ['3281', '4209'], 'count': 1}, {'pair': ['3467', '819'], 'count': 1}, {'pair': ['2734', '3467'], 'count': 1}, {'pair': ['2590', '819'], 'count': 1}, {'pair': ['2590', '2734'], 'count': 1}, {'pair': ['2734', '819'], 'count': 1}, {'pair': ['3042', '3467'], 'count': 1}, {'pair': ['3467', '3523'], 'count': 1}, {'pair': ['3042', '3523'], 'count': 1}, {'pair': ['3467', '4751'], 'count': 1}, {'pair': ['00029275', '3467'], 'count': 3}, {'pair': ['00029274', '3467'], 'count': 2}, {'pair': ['00029275', '4751'], 'count': 2}, {'pair': ['00029274', '4751'], 'count': 1}, {'pair': ['00029274', '00029275'], 'count': 3}, {'pair': ['00013191', '00015143'], 'count': 3}, {'pair': ['2334', '3467'], 'count': 1}, {'pair': ['00010061', '3467'], 'count': 1}, {'pair': ['00010062', '3467'], 'count': 1}, {'pair': ['1180', '3467'], 'count': 1}, {'pair': ['00010035', '3467'], 'count': 1}, {'pair': ['00010061', '2334'], 'count': 1}, {'pair': ['00010062', '2334'], 'count': 1}, {'pair': ['1180', '2334'], 'count': 1}, {'pair': ['00010035', '2334'], 'count': 1}, {'pair': ['00010061', '00010062'], 'count': 1}, {'pair': ['00010061', '1180'], 'count': 1}, {'pair': ['00010035', '00010061'], 'count': 1}, {'pair': ['00010062', '1180'], 'count': 1}, {'pair': ['00010035', '00010062'], 'count': 1}, {'pair': ['00010035', '1180'], 'count': 1}, {'pair': ['3467', '4086'], 'count': 1}, {'pair': ['00010352', '3467'], 'count': 1}, {'pair': ['3467', '4016'], 'count': 1}, {'pair': ['1112', '3467'], 'count': 1}, {'pair': ['00010352', '4086'], 'count': 1}, {'pair': ['3479', '4086'], 'count': 1}, {'pair': ['4016', '4086'], 'count': 1}, {'pair': ['1112', '4086'], 'count': 1}, {'pair': ['00010352', '3479'], 'count': 1}, {'pair': ['00010352', '4016'], 'count': 1}, {'pair': ['00010352', '1112'], 'count': 1}, {'pair': ['3479', '4016'], 'count': 1}, {'pair': ['1112', '3479'], 'count': 1}, {'pair': ['1112', '4016'], 'count': 1}, {'pair': ['00023096', '3467'], 'count': 1}, {'pair': ['00013191', '00023096'], 'count': 1}, {'pair': ['00015143', '00023096'], 'count': 1}, {'pair': ['3230', '3467'], 'count': 1}, {'pair': ['1408', '3230'], 'count': 1}, {'pair': ['3230', '3765'], 'count': 1}, {'pair': ['00010673', '2678'], 'count': 1}, {'pair': ['00010673', '3551'], 'count': 1}, {'pair': ['2678', '3467'], 'count': 1}, {'pair': ['3467', '3551'], 'count': 1}, {'pair': ['2678', '3551'], 'count': 1}, {'pair': ['00016556', '3467'], 'count': 1}, {'pair': ['2839', '3467'], 'count': 2}, {'pair': ['00016556', '2839'], 'count': 1}, {'pair': ['00015156', '3467'], 'count': 1}, {'pair': ['00025457', '2590'], 'count': 1}, {'pair': ['2590', '2839'], 'count': 1}, {'pair': ['00025457', '3467'], 'count': 1}, {'pair': ['00015143', '00025457'], 'count': 1}, {'pair': ['00025457', '2839'], 'count': 1}, {'pair': ['00015143', '2839'], 'count': 1}, {'pair': ['00014883', '3467'], 'count': 1}, {'pair': ['00014883', '2590'], 'count': 1}, {'pair': ['00014883', '00015143'], 'count': 1}, {'pair': ['00013839', '3467'], 'count': 1}, {'pair': ['00012182', '3467'], 'count': 1}, {'pair': ['00013839', '4209'], 'count': 1}, {'pair': ['00012182', '00013839'], 'count': 1}, {'pair': ['00012182', '4209'], 'count': 1}, {'pair': ['3466', '3467'], 'count': 1}, {'pair': ['3458', '3467'], 'count': 1}, {'pair': ['2169', '3467'], 'count': 1}, {'pair': ['00028245', '3467'], 'count': 1}, {'pair': ['3458', '3466'], 'count': 1}, {'pair': ['2169', '3466'], 'count': 1}, {'pair': ['2156', '3466'], 'count': 1}, {'pair': ['00028245', '3466'], 'count': 1}, {'pair': ['2169', '3458'], 'count': 1}, {'pair': ['2156', '3458'], 'count': 1}, {'pair': ['00028245', '3458'], 'count': 1}, {'pair': ['2156', '2169'], 'count': 1}, {'pair': ['00028245', '2169'], 'count': 1}, {'pair': ['00028245', '2156'], 'count': 1}, {'pair': ['00016952', '3467'], 'count': 1}, {'pair': ['00015143', '00016952'], 'count': 1}, {'pair': ['1409', '3467'], 'count': 1}, {'pair': ['1408', '1409'], 'count': 1}, {'pair': ['1409', '3765'], 'count': 1}, {'pair': ['1677', '3467'], 'count': 1}, {'pair': ['2141', '3467'], 'count': 1}, {'pair': ['1677', '2141'], 'count': 1}];


// 准备venn.js所需的数据结构
var sets = Object.keys(counts).map(ownerId => ({sets: [ownerId], size: counts[ownerId]}));
const overlaps = overlapsList.map(item => ({
    sets: item.pair, // 这里假设pair已经是ownerId的数组
    size: item.count
}));

// 组合sets和overlaps数据
var vennData = sets.concat(overlaps);

// 生成Euler图
var chart = venn.VennDiagram();
var div = d3.select("#venn").datum(vennData).call(chart);

div.selectAll("text").style("opacity", 0);

div.selectAll("g")
    .on("mouseover", function(event, d) {
        d3.select(".tooltip").remove();
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);
        tooltip.transition()
            .duration(200)
            .style("opacity", .9);
        var sets = d.sets ? d.sets.join(", ") : '';
        tooltip.html(d.size + " books<br>" + sets)
            .style("visibility", "visible")
            .style("left", (event.pageX + 10) + "px")
            .style("top", (event.pageY + 20) + "px");
    })
    .on("mouseout", function() {
        d3.select(".tooltip").transition()
            .duration(0)
            .style("opacity", 0)
            .remove();
    });