{% extends 'base.html' %}
{% block chart %}

    <div class="container" style="margin-top: 20px; margin-left:20px">
        <div class="left-panel">
            <div class="hover-description" style="width: 480px" data-fulltext="This graph shows the timeline of the ownership of 181 books. Each book's timeline has multiple nodes representing different owners. Each node is labelled with the start year and owner ID, and the timelines of all the books converge at a red centre point, indicating that the books were once owned by the same owner (ID 3467). Different nodes of the same owner are connected by coloured lines, making it easy to trace the common history between different books. Hover to see more details such as book ID and owner ID.">
                <p>This graph shows the timeline of the ownership of 181 books... <span class="moreText">Hover to read more</span></p>
            </div>
            <div class="checkbox-container">
            <label>
                <input type="checkbox" id="toggleArrangedDataCheckbox" checked>
                Display Organized Data
            </label>
            <label>
                <input type="checkbox" id="showYearsCheckbox" checked>
                Show start year
            </label>
            <label>
                <input type="checkbox" id="showOwnersCheckbox">
                Show different Owner
            </label>
            <label>
                <input type="checkbox" id="showSameOwnersCheckbox" checked>
                Show link
            </label>
                <div class="hover-description" style="width: 120px" data-fulltext="'Display Organized Data': This feature is based on the Apriori algorithm for clustering the raw data, making timelines with more co-owners visually closer together, thus emphasising the connections between books through co-owners. |'Show Start Year': Toggles the display of start years on nodes. Unchecking this makes the timelines cleaner and less cluttered. |'Show Different Owner': Allows for color differentiation of nodes based on different owners. If unchecked, all nodes appear in blue, providing a uniform view. |'Show Link': Controls the visibility of connections between nodes of the same owner across different timelines. Checking this box reveals a list of all owners, enabling users to select specific owners to view their links. Unchecking it hides both the checkbox list and the links on the diagram.">
                    <p><span class="moreText">Hover to read help</span></p>
                </div>
            </div>
            <svg id="web_svg" width="1000" height="800">
                <g id="web"></g>
            </svg>
            <div class="buttons">
                <button id="zoom_in">Zoom In</button>
                <button id="zoom_out">Zoom Out</button>
                <button id="reset">Reset Zoom</button>
            </div>
        </div>
        <div class="right-panel" id="controls2">
            <div class="container2">
                <div style="stroke: black; stroke-width: 1px">
                    <button id="unlockButton" style="width: 170px">Unlock</button>
                    <p id="statusMessage" style="width: 170px; margin-bottom: 10px; color: firebrick">You can lock a timeline by clicking or using the checkbox.</p>
                    <input type="text" id="bookSearchBar" style="width: 170px" placeholder="Search for a book...">
                    <div id="bookCheckboxes" style="width: 170px;height: 90px"></div>
                </div>
                <div id="divider"></div>
                <div style="margin-left: 10px">

                    <div class="buttons">
                        <button id="webSelectAll">Select All</button>
                        <button id="webDeselectAll">Deselect All</button>
                    </div>
                    <input type="text" id="ownerSearchBar" placeholder="Search Owner ID">
                    <div id="ownerCheckboxes">

                    </div>
                </div>
            </div>
            <div id="bookDetails"></div>

            <svg id="focusedWeb" width="450" height="450" style="border: 1px solid black;"></svg>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="{{ url_for('serve_js', filename='network_graph.js') }}"></script>
    <script src="{{ url_for('serve_js', filename='chord_graph.js') }}"></script>
    <script src="{{ url_for('serve_js', filename='timeline.js') }}"></script>
    <script src="{{ url_for('serve_js', filename='spider_web.js') }}"></script>
    <script src="{{ url_for('serve_js', filename='table.js') }}"></script>
    <script src="{{ url_for('serve_js', filename='description.js') }}"></script>
{% endblock %}